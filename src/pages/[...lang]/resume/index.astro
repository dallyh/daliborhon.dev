---
import ScrollIndicator from "@components/astro/resume/ScrollIndicator.astro";
import * as m from "$messages";
import { languageTag } from "$paraglide-runtime";
import { Image } from "astro:assets";
import { getEntry } from "astro:content";
import PageLayout from "@layouts/PageLayout.astro";
import profilePicture from "@assets/img/profile/me.png";

export { getStaticPaths } from "@i18n/utils";

const locale = languageTag();

const resumeEntry = await getEntry("resume", locale);
const { Content } = await resumeEntry.render();

const layoutProps = {
    title: "Dalibor Hon - " + m.common__resume(),
    description: m.resume__resume_page_description(),
};
---

<PageLayout {...layoutProps}>
    <section class="hero-container" id="hero">
        <div class="hero">
            <div class="profile-picture-wrapper">
                <Image class="profile-picture" src={profilePicture} width={220} height={220} alt="Profile picture" />
            </div>
            <div class="hero-title-wrapper">
                <h1 class="hero-title gradient-text">
                    Dalibor<br />
                    Hon
                </h1>
                <p>{resumeEntry.data.currentPosition}</p>
            </div>
        </div>
        <div class="section-footer noprint">
            <ScrollIndicator href="#content" />
        </div>
    </section>
    <article class="prose max-w-none dark:prose-invert" id="content">
        <Content />
    </article>
</PageLayout>

<style is:global>
    :root[data-theme="light"] {
        .cert-card-logo.dark {
            display: none;
        }
    }

    :root[data-theme="dark"] {
        .cert-card-logo.light {
            display: none;
        }
    }
</style>

<style>
    .hero-container {
        display: grid;
        gap: 0.5rem;
        padding-bottom: 1rem;
        scroll-margin-top: 200px;
        align-items: center;
        min-height: calc(100svh - 4rem); /* Header padding */
    }

    .hero-title-wrapper > p {
        font-weight: 800;
        letter-spacing: 0.35rem;
        margin-top: 1rem;
        position: relative;
        font-size: min(3vw, 1rem);
        width: max-content;
        color: var(--body-color);
    }

    .hero-title-wrapper > p::after {
        content: "";
        position: absolute;
        right: 0;
        width: 100%;
        height: 100%;
        animation: typing 1s steps(19) forwards;
        animation-delay: 400ms;
        background-color: var(--bg-color);
    }

    .hero-title {
        display: inline-flex;
        font-size: min(15vw, 7rem);
        position: relative;
        margin-bottom: 1rem;
        margin-left: -0.3rem;
        font-weight: normal;
    }

    .hero-title::before {
        content: "";
        position: absolute;
        left: 0.3rem;
        height: 2px;
        width: 50%;
        background-color: rgba(var(--accent), 1);
        bottom: -1.25rem;
        transform: scaleX(0);
        animation: scaleUpX 300ms ease-in-out forwards 300ms;
        transform-origin: left;
    }

    .profile-picture-wrapper {
        position: relative;
        width: clamp(140px, 40vw, 220px);
        height: clamp(140px, 40vw, 220px);
        border-radius: 50%;
        margin-bottom: 2rem;
        margin-left: 0.2rem;
        box-shadow:
            0px 5px 30px 0px rgba(var(--accent), 0.8),
            0px 0px 0px 7px rgba(var(--accent), 0.5);
    }

    .profile-picture {
        display: block;
        object-fit: cover;
        border-radius: inherit;
        height: 100%;
    }

    .section-footer {
        display: flex;
        justify-content: center;
        align-items: center;
        align-self: flex-end;
        padding-bottom: 0.5rem;
    }
</style>
