---
import { Image } from "astro:assets";
import profilePicture from "@assets/img/profile/me.png";
import { m } from "@paraglide/messages";
import type { HTMLAttributes } from "astro/types";

interface Props {
	img?: ImageMetadata;
	imgClass?: string;
	attrs?: HTMLAttributes<"img">;
}

const { imgClass, img = profilePicture, ...attrs } = Astro.props;
const isPrint = Astro.locals.isPrint;
---

{
	!isPrint && (
		<div class="w-42 h-42 relative">
			<div class="bg-primary absolute left-0 top-[-12px] h-48 w-[1px] z-[1] animate-pulse [animation-delay:0.3s] [animation-duration:2.5s]" />
			<div class="bg-primary absolute right-0 top-[-12px] h-48 w-[1px] z-[1] animate-pulse [animation-delay:1.1s] [animation-duration:1.8s]" />
			<div class="bg-primary absolute left-[-12px] top-0 h-[1px] w-48 z-[1] animate-pulse [animation-delay:0.7s] [animation-duration:2.2s]" />
			<div class="bg-primary absolute bottom-0 left-[-12px] h-[1px] w-48 z-[1] animate-pulse delay-150 [animation-delay:1.6s] [animation-duration:1.4s]" />
			<div class="not-prose">
				<Image class:list={["w-42", "h-42", "object-cover", "grayscale", imgClass]} src={img} alt={m.common__profile_picture()} {...attrs} />
			</div>
		</div>
	)
}

{isPrint && <Image src={img} style="width: 10rem; height: 11rem;" alt={m.common__profile_picture()} {...attrs} />}
